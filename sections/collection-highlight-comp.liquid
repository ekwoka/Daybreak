<!-- sections/collection-highlight-comp.liquid START -->

<h2 class="w-3/4 mx-auto mb-4 text-xl font-bold tracking-wider text-center md:w-1/2 md:text-2xl {{ section.settings.text_transform_title }}">
    {{ section.settings.title | escape | default: "Popular Collections" }}
</h2>

<div class="relative grid w-full max-w-screen-lg grid-flow-row grid-cols-1 gap-6 px-4 mx-auto md:grid-cols-4 sm:grid-cols-2">
        {%- for block in section.blocks -%}
            {%- case block.type -%}
                {%- when "collection" -%}
                    {%- assign collection = collections[block.settings.collection] -%}
                    <a href="{{ collection.url }}" class="relative flex items-center w-full h-24 px-4 py-2 text-gray-900 bg-gray-300 shadow-md rounded-xl md:relative md:flex md:flex-col md:items-center md:justify-start md:p-0 md:m-0 md:border-2 md:border-gray-800 md:border-solid md:rounded-sm md:h-auto">
                        {%- liquid
                            if block.settings.collection_image
                                assign image = block.setting.collection_image
                            else
                                assign image = collection.featured_image
                            endif
                            if block.settings.collection_title != ''
                                assign title = block.settings.collection_title
                            else
                                assign title = collection.title
                            endif
                        -%}
                            <img src="{{ image | img_url: '360x' }}" id="loop-{{ forloop.index }}" srcset="{%- render 'responsive-srcset', image: image -%}" class="absolute inset-y-0 right-0 block object-cover w-full h-full p-0 m-0 {%- if section.settings.overlay %} mix-blend-luminosity {%- endif %} rounded-xl md:block md:w-full md:h-full md:max-w-full md:p-0 md:m-0 md:static md:mix-blend-normal md:rounded-none" alt="{{ image.alt }}" loading="lazy" data-sizes="auto" sizes="5px" width="{{ image.width }}" height="{{ image.height }}">
                        <div class="absolute inset-0 w-full h-full rounded-lg bg-gradient-to-r from-gray-300 via-gray-300/70 to-gray-300-10 md:hidden"> </div>
                        <span class="relative z-[2] text-2xl font-semibold tracking-wide {{ section.settings.collection_product_title_text_transform }} duration-500 md:text-lg md:block md:w-full md:p-1 md:m-0 md:font-bold md:text-center md:text-gray-50 md:bg-gray-900 md:tracking-wider">{{ title | default: 'No Collection Selected' }}</span>
                    </a>
                {%- when "product" -%}
                    {%- assign product = block.settings.product -%}
                    <a href="{{ product.url }}" class="relative flex items-center w-full h-24 px-4 py-2 text-gray-900 bg-gray-300 shadow-md rounded-xl md:relative md:flex md:flex-col md:items-center md:justify-start md:p-0 md:m-0 md:border-2 md:border-gray-800 md:border-solid md:rounded-sm md:h-auto">
                        {%- liquid
                            if block.settings.product_image
                                assign image = block.setting.product_image
                            else
                                assign image = product.featured_image
                            endif
                            if block.settings.product_title != ''
                                assign title = block.settings.product_title
                            else
                                assign title = product.tile
                            endif
                        -%}
                            <img src="{{ image | img_url: '360x' }}" id="loop-{{ forloop.index }}" srcset="{%- render 'responsive-srcset', image: image -%}" class="absolute inset-y-0 right-0 block object-cover w-full h-full p-0 m-0 {%- if section.settings.overlay %} mix-blend-luminosity {%- endif %} rounded-xl md:block md:w-full md:h-full md:max-w-full md:p-0 md:m-0 md:static md:mix-blend-normal md:rounded-none" alt="{{ image.alt }}" loading="lazy" data-sizes="auto" sizes="5px" width="{{ image.width }}" height="{{ image.height }}">
                        <div class="absolute inset-0 w-full h-full rounded-lg bg-gradient-to-r from-gray-300 via-gray-300/70 to-gray-300-10 md:hidden"> </div>
                        <span class="relative z-[2] text-2xl font-semibold tracking-wide {{ section.settings.collection_product_title_text_transform }} duration-500 md:text-lg md:block md:w-full md:p-1 md:m-0 md:font-bold md:text-center md:text-gray-50 md:bg-gray-900 md:tracking-wider">{{ title | default: 'No Product Selected' }}</span>
                    </a>
            {%- endcase -%}
        {%- endfor -%}
        {%- if section.settings.overlay -%}
            <img src="{{ section.settings.overlay | img_url: '360x' }}" srcset="{%- render 'responsive-srcset', image: section.settings.overlay -%}" class="absolute inset-0 block object-cover w-full h-full transform pointer-events-none opacity-80 object-x1/3 sm:object-center mix-blend-soft-light md:hidden" loading="lazy" alt="" data-sizes="auto" sizes="5px" width="{{ section.settings.overlay.width }}" height="{{ section.settings.overlay.height }}"/>
        {%- endif -%}
</div>

<!-- sections/collection-highlight-comp.liquid END -->

{% schema %}

{
    "name": "Popular Collections",
    "tag": "section",
    "settings": [
        {
            "type": "header",
            "content": "Featured Collections"
        }, {
            "type": "text",
            "id": "custom_class",
            "label": "Custom Class",
            "info": "Custom class to apply css styles for specific sections"
        }, {
            "type": "color",
            "id": "border_color_collection_list",
            "label": "Collections Border Color",
            "default": "#444"
        }, {
            "type": "color",
            "id": "text_bg_color_collection_list",
            "label": "Collections Background Text Color",
            "default": "#444"
        }, {
            "type": "color",
            "id": "text_color_collection_list",
            "label": "Collections Text Color",
            "default": "#fff"
        }, {
            "type": "text",
            "id": "title",
            "label": "Headline Text",
            "default": "Featured Collections"
        }, {
            "type": "range",
            "id": "top_margin_featured",
            "info": "Only works if section above is the banner",
            "min": 0,
            "max": 500,
            "step": 5,
            "unit": "px",
            "label": "Position On/Off Banner",
            "default": 125
        }, {
            "type": "select",
            "id": "text_transform_title",
            "label": "Headline Text Transform",
            "options": [
                {
                    "value": " ",
                    "label": "Same as Input"
                }, {
                    "value": "capitalize",
                    "label": "Capitalize"
                }, {
                    "value": "uppercase",
                    "label": "Uppercase"
                }
            ],
            "default": " "
        }, {
            "type": "select",
            "id": "collection_product_title_text_transform",
            "label": "Collection/Product Title Text Transform ",
            "default": "uppercase",
            "options": [
                {
                    "value": "uppercase",
                    "label": "Uppercase"
                }, {
                    "value": "capitalize",
                    "label": "Capitalize"
                }, {
                    "value": "lowercase",
                    "label": "Lowercase"
                }
            ]
        },
        {
            "type": "image_picker",
            "id": "overlay",
            "label": "Overlay Image"
        }
    ],
    "blocks": [
        {
            "type": "collection",
            "name": "Collection",
            "limit": 4,
            "settings": [
                {
                    "label": "Collection",
                    "id": "collection",
                    "type": "collection"
                }, {
                    "label": "Collection Image",
                    "id": "collection_image",
                    "type": "image_picker",
                    "info": "Size: 400x400"
                }, {
                    "label": "Text Title",
                    "id": "collection_title",
                    "type": "text"
                }
            ]
        }, {
            "type": "product",
            "name": "Product",
            "settings": [
                {
                    "label": "Product",
                    "id": "product",
                    "type": "product"
                }, {
                    "label": "Product Image",
                    "id": "product_image",
                    "type": "image_picker",
                    "info": "Size: 400x400"
                }, {
                    "label": "Text Title",
                    "id": "product_title",
                    "type": "text"
                }
            ]
        }
    ],
    "presets": [
        {
            "category": "collection",
            "name": "Collections Highlight",
            "blocks": [
                {
                    "type": "collection"
                }, {
                    "type": "collection"
                }, {
                    "type": "collection"
                }
            ]
        }
    ]
}

{% endschema %}